# RAMSEY(3,6) CARIOLARO PROOF - REQUEST FOR GPT-5.1 ASSISTANCE

Date: 2025-11-25 13:50:08
Status: Proof skeleton complete, need help filling in the Admitted proofs

## ðŸŽ¯ EXECUTIVE SUMMARY - START HERE

**Good news:** Much more progress than expected! We found existing infrastructure.

**What's done:**
- âœ… `five_regularity_upper` (deg â‰¤ 5) - FULLY PROVED in cariolaro_anchored_proof.mg
- âœ… `neighborhood_intersection_lower` (â‰¥1 common neighbor) - FULLY PROVED in common_neighbors_bound.mg
  (just needs to be transplanted + 3 trivial admits filled)

**What needs work (in priority order):**
1. **EASIEST**: `neighborhood_intersection_upper` - Use R(3,4)=9 (straightforward)
2. **MEDIUM**: `five_regularity` (deg = 5) - Use R(3,5)=14 + critical graph analysis
3. **MEDIUM**: `pq_decomposition_exists` - Counting argument
4. **MEDIUM**: `P_forms_4cycle` - Combinatorial argument
5. **FINAL**: `good_graph_contradiction_anchored` - Glue everything together

**Key files:**
- cariolaro_anchored_proof.mg (main file - compiles!)
- common_neighbors_bound.mg (has complete proof to copy)
- paper/2025_02_07_b1cb8ce31b5aabf14429g.tex (Cariolaro's paper)

---

## CONTEXT

We discovered that the `intersection_nonempty` lemma was FALSE (proven with explicit counterexample).
GPT-5.1 correctly identified that the real Cariolaro proof anchors at a SPECIFIC vertex v and uses
geometric structure, not general pigeonhole arguments.

We've now created `cariolaro_anchored_proof.mg` following Cariolaro's paper structure.

## WHAT WE NEED HELP WITH

The proof skeleton is complete and compiles. We need help filling in the `Admitted` proofs.
Priority order (easiest to hardest):

1. **neighborhood_intersection_upper** (line 94-116) - Should be doable with R(3,4)=9
2. **neighborhood_intersection_lower** (line 80-92) - Needs 5-regularity
3. **five_regularity** (line 61-75) - The hardest; needs R(3,5)=14 + critical graph analysis

## CURRENT FILE: cariolaro_anchored_proof.mg

```megalodon
Definition triangle_free : set -> (set -> set -> prop) -> prop :=
  fun V R => forall x :e V, forall y :e V, forall z :e V, R x y -> R y z -> R x z -> False.

Definition is_indep_set : set -> (set -> set -> prop) -> set -> prop :=
  fun V R S => S c= V /\ (forall x :e S, forall y :e S, x <> y -> ~R x y).

Definition no_k_indep : set -> (set -> set -> prop) -> set -> prop :=
  fun V R k => forall S, S c= V -> equip k S -> ~is_indep_set V R S.

Axiom degree_upper_bound : forall V:set, forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free V R ->
  no_k_indep V R 6 ->
  forall v :e V, forall S, S c= V -> equip 6 S ->
    (forall x :e S, R v x) -> (forall x :e S, v <> x) -> False.

Theorem five_regularity_upper : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, forall N:set, N c= 18 ->
    (forall x :e N, R v x /\ x <> v) ->
    equip 6 N -> False.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, forall N:set, N c= 18 ->
    (forall x :e N, R v x /\ x <> v) ->
    equip 6 N -> False.
let R: set -> set -> prop.
assume Hsym: forall x y, R x y -> R y x.
assume Htf: triangle_free 18 R.
assume Hno6: no_k_indep 18 R 6.
let v. assume Hv: v :e 18.
let N. assume HN18: N c= 18.
assume HNadj: forall x :e N, R v x /\ x <> v.
assume HN6: equip 6 N.
prove False.
apply Hno6 N HN18 HN6.
prove is_indep_set 18 R N.
prove N c= 18 /\ (forall x :e N, forall y :e N, x <> y -> ~R x y).
apply andI (N c= 18) (forall x :e N, forall y :e N, x <> y -> ~R x y).
- exact HN18.
- prove forall x :e N, forall y :e N, x <> y -> ~R x y.
  let x. assume Hx: x :e N.
  let y. assume Hy: y :e N.
  assume Hneq: x <> y.
  prove ~R x y.
  claim HRvx: R v x. exact andEL (R v x) (x <> v) (HNadj x Hx).
  claim HRvy: R v y. exact andEL (R v y) (y <> v) (HNadj y Hy).
  claim Hxv: x <> v. exact andER (R v x) (x <> v) (HNadj x Hx).
  claim Hyv: y <> v. exact andER (R v y) (y <> v) (HNadj y Hy).
  assume HRxy: R x y.
  apply Htf x (HN18 x Hx) y (HN18 y Hy) v Hv.
  - prove R x y. exact HRxy.
  - prove R y v. exact Hsym v y HRvy.
  - prove R x v. exact Hsym v x HRvx.
Qed.

Theorem five_regularity : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, exists N:set, N c= 18 /\ equip 5 N /\
    (forall x :e N, R v x /\ x <> v) /\
    (forall x :e 18, x <> v -> R v x -> x :e N).
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, exists N:set, N c= 18 /\ equip 5 N /\
    (forall x :e N, R v x /\ x <> v) /\
    (forall x :e 18, x <> v -> R v x -> x :e N).
Admitted.

Definition neighborhood : set -> (set -> set -> prop) -> set -> set :=
  fun V R v => {u :e V | R v u /\ u <> v}.

Theorem neighborhood_intersection_lower : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall u v :e 18, u <> v -> ~R u v ->
  exists c :e 18, R u c /\ R v c /\ c <> u /\ c <> v.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall u v :e 18, u <> v -> ~R u v ->
  exists c :e 18, R u c /\ R v c /\ c <> u /\ c <> v.
Admitted.

Theorem neighborhood_intersection_upper : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall u v :e 18, u <> v -> ~R u v ->
  forall c1 c2 c3 :e 18,
    R u c1 /\ R v c1 /\ c1 <> u /\ c1 <> v ->
    R u c2 /\ R v c2 /\ c2 <> u /\ c2 <> v ->
    R u c3 /\ R v c3 /\ c3 <> u /\ c3 <> v ->
    c1 <> c2 -> c1 <> c3 -> c2 <> c3 ->
    False.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall u v :e 18, u <> v -> ~R u v ->
  forall c1 c2 c3 :e 18,
    R u c1 /\ R v c1 /\ c1 <> u /\ c1 <> v ->
    R u c2 /\ R v c2 /\ c2 <> u /\ c2 <> v ->
    R u c3 /\ R v c3 /\ c3 <> u /\ c3 <> v ->
    c1 <> c2 -> c1 <> c3 -> c2 <> c3 ->
    False.
Admitted.

Theorem pq_decomposition_exists : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18,
  exists P Q:set,
    P c= 18 /\ Q c= 18 /\
    equip 4 P /\ equip 8 Q /\
    (forall p :e P, ~R v p) /\
    (forall q :e Q, ~R v q) /\
    (P :/\: Q = Empty) /\
    True.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18,
  exists P Q:set,
    P c= 18 /\ Q c= 18 /\
    equip 4 P /\ equip 8 Q /\
    (forall p :e P, ~R v p) /\
    (forall q :e Q, ~R v q) /\
    (P :/\: Q = Empty) /\
    True.
Admitted.

Theorem P_forms_4cycle : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, forall P:set,
    P c= 18 -> equip 4 P ->
    (forall p :e P, ~R v p) ->
    exists p1 p2 p3 p4,
      P = {p1} :\/:  {p2} :\/:  {p3} :\/:  {p4} /\
      R p1 p2 /\ R p2 p3 /\ R p3 p4 /\ R p4 p1 /\
      ~R p1 p3 /\ ~R p2 p4.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall v :e 18, forall P:set,
    P c= 18 -> equip 4 P ->
    (forall p :e P, ~R v p) ->
    exists p1 p2 p3 p4,
      P = {p1} :\/:  {p2} :\/:  {p3} :\/:  {p4} /\
      R p1 p2 /\ R p2 p3 /\ R p3 p4 /\ R p4 p1 /\
      ~R p1 p3 /\ ~R p2 p4.
Admitted.

Theorem good_graph_contradiction_anchored : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  False.
prove forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  False.
let R: set -> set -> prop.
assume Hsym: forall x y, R x y -> R y x.
assume Htf: triangle_free 18 R.
assume Hno6: no_k_indep 18 R 6.
prove False.
Admitted.

Theorem ramsey_3_6_upper_bound :
  forall R:set -> set -> prop,
    (forall x y, R x y -> R y x) ->
    triangle_free 18 R ->
    exists S:set, S c= 18 /\ equip 6 S /\ is_indep_set 18 R S.
prove forall R:set -> set -> prop,
    (forall x y, R x y -> R y x) ->
    triangle_free 18 R ->
    exists S:set, S c= 18 /\ equip 6 S /\ is_indep_set 18 R S.
let R: set -> set -> prop.
assume Hsym: forall x y, R x y -> R y x.
assume Htf: triangle_free 18 R.
prove exists S:set, S c= 18 /\ equip 6 S /\ is_indep_set 18 R S.
Admitted.
```

## CARIOLARO'S PAPER PROOF STRUCTURE

From paper/2025_02_07_b1cb8ce31b5aabf14429g.tex:

**Claim 1 (5-regularity):**
- Upper bound: Triangle-free âŸ¹ N(v) is IS âŸ¹ deg(v) â‰¤ 5 [âœ… PROVED as five_regularity_upper]
- Lower bound: If deg(v) < 5:
  - If deg(v) â‰¤ 3: Let H = G - N[v]. Then |H| â‰¥ 14 = R(3,5).
    Since H triangle-free, H has 5-IS. With v, get 6-IS. Contradiction.
  - If deg(v) = 4: |H| = 13. H is THE R(3,5)-critical graph (unique, 4-regular).
    Any t âˆˆ N(v) has â‰¥3 neighbors in H (by 4-regularity + t has 4 neighbors outside v).
    Those 3 neighbors are independent from N(v)\{t}.
    So (N(v)\{t}) âˆª {those 3 neighbors} is 6-IS. Contradiction.

**Claim 2 (intersection bounds):**
- Lower (â‰¥1): If |N(u)âˆ©N(v)| = 0, then {v} âˆª N(u) is 6-IS (using 5-regularity).
- Upper (â‰¤2): If |N(u)âˆ©N(v)| â‰¥ 3, then H = G - N[u,v] has |H| â‰¥ 9 = R(3,4).
  Since H triangle-free, H has 4-IS. With u,v get 6-IS. Contradiction.

**Claim 3 (P/Q decomposition):**
Fix v. N(v) has 5 vertices, non-neighbors V12 has 12 vertices.
For w âˆˆ V12: 1 â‰¤ |N(v)âˆ©N(w)| â‰¤ 2 (by Claim 2).
- P = {w âˆˆ V12 | |N(v)âˆ©N(w)| = 1} has |P| = 4
- Q = {w âˆˆ V12 | |N(v)âˆ©N(w)| = 2} has |Q| = 8
Proof: Count edges from N(v) to V12. Each n âˆˆ N(v) has 5 neighbors total,
one is v, so 4 in V12. Total: 5 Ã— 4 = 20 edges.
From V12: |P| Ã— 1 + |Q| Ã— 2 = 20, and |P| + |Q| = 12. Solving: |P| = 4, |Q| = 8.

**Claim 4 (P forms 4-cycle):**
The 4 vertices in P form a 4-cycle in G.
[Complex combinatorial argument using edge counting and avoiding 6-IS]

**Final step:**
Using the 4-cycle structure of P and properties of Q, construct explicit 6-IS.
Details in paper lines 61-67.

## AVAILABLE INFRASTRUCTURE

### From preamble.mgs:

```megalodon
Axiom TwoRamseyProp_3_3_6 : TwoRamseyProp 3 3 6.
Axiom TwoRamseyProp_3_4_9 : TwoRamseyProp 3 4 9.
Axiom TwoRamseyProp_3_5_14 : TwoRamseyProp 3 5 14.

Definition TwoRamseyProp : set -> set -> set -> prop
 := fun M N V =>
      forall R:set -> set -> prop,
        (forall x y, R x y -> R y x)
       -> ((exists X c= V, equip M X /\ (forall x y :e X, x <> y -> R x y))
        \/ (exists Y c= V, equip N Y /\ (forall x y :e Y, x <> y -> ~R x y))).

Axiom dneg : forall P:prop, ~~P -> P.
```

### From good_graph_proof.mg:

```megalodon
Theorem indep_add_vertex : forall V:set, forall R:set -> set -> prop, forall S:set, forall v:set,
  is_indep_set V R S ->
  v :e V ->
  v /:e S ->
  (forall x :e S, ~R v x) ->
  (forall x :e S, ~R x v) ->
  is_indep_set V R (S :\/: {v}).

Theorem neighborhood_indep : forall V:set, forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free V R ->
  forall v :e V, forall x :e V, forall y :e V,
  R v x -> R v y -> x <> y -> ~R x y.
```

### From vertex_degree_bound.mg (FULLY PROVED):

```megalodon
Theorem vertex_6_neighbors_contradiction:
  forall R : set -> set -> prop,
  forall V : set,
  forall v n1 n2 n3 n4 n5 n6 : set,
  (forall x, x :e V -> forall y, y :e V -> R x y -> R y x) ->
  (triangle-free) ->
  (no 6-indep) ->
  v :e V -> n1,...,n6 :e V -> (all distinct) ->
  R v n1 -> R v n2 -> R v n3 -> R v n4 -> R v n5 -> R v n6 ->
  False.
```
This proves deg(v) â‰¤ 5 (the upper bound). Can be adapted to our cariolaro_anchored_proof.mg.

### From common_neighbors_bound.mg (ALMOST COMPLETE):

**âœ… FULLY PROVED:**
```megalodon
Theorem common_neighbors_ge_1 : forall R:set -> set -> prop,
  (forall x y, R x y -> R y x) ->
  triangle_free 18 R ->
  no_k_indep 18 R 6 ->
  forall u v :e 18,
    ~R u v -> u <> v ->
    exists x :e 18, R u x /\ R v x.
```
**This is our `neighborhood_intersection_lower`!** It's already proved, just needs:
- Axiom `graph_is_5_regular` replaced with our `five_regularity` theorem
- Two trivial admits filled in:
  - `indep_add_vertex` (copy from good_graph_proof.mg)
  - `equip_5_plus_1_is_6` (trivial cardinality)
  - `S6_subset` claim (easy)

The proof structure is excellent - can be transplanted directly to cariolaro_anchored_proof.mg!

## UPDATED STATUS - MUCH EASIER THAN EXPECTED!

**GREAT NEWS:** We already have most of the work done in other files!

### What can be immediately transplanted:

1. **neighborhood_intersection_lower** - âœ… FULLY PROVED in common_neighbors_bound.mg
   - Just copy `common_neighbors_ge_1` proof
   - Replace axiom `graph_is_5_regular` with our `five_regularity` theorem
   - Fill in 3 trivial admits (indep_add_vertex, equip_5_plus_1_is_6, S6_subset)

2. **five_regularity_upper** - âœ… ALREADY DONE in cariolaro_anchored_proof.mg (lines 17-59)

### What still needs work:

1. **neighborhood_intersection_upper** (EASIER - just R(3,4)=9 argument)
2. **five_regularity lower bound** (HARDER - needs R(3,5)=14 + critical graph)
3. **pq_decomposition_exists** (MEDIUM - counting argument)
4. **P_forms_4cycle** (MEDIUM - combinatorial argument)
5. **good_graph_contradiction_anchored** (FINAL - glue everything together)

## SPECIFIC QUESTIONS FOR GPT-5.1

### Priority 1 (EASIEST): neighborhood_intersection_upper

How to use TwoRamseyProp_3_4_9 to show that if u,v have â‰¥3 common neighbors c1,c2,c3, we get a contradiction?

Proof outline:
- {c1,c2,c3} is 3-independent (by triangle-free with u)
- H = 18 \ (N[u] âˆª N[v] âˆª {u,v}) has size â‰¥ ? (need to calculate)
- Apply TwoRamseyProp_3_4_9 to H to get 4-IS in H
- With {u,v}, get 6-IS total

**Question:** How to calculate |H| correctly? If u,v each have 5 neighbors (by 5-regularity),
and they share 3 common neighbors, then:
- |N[u] âˆª N[v]| = 2 + 5 + 5 - 3 = 9
- |H| = 18 - 9 = 9

So H has exactly 9 vertices, and TwoRamseyProp_3_4_9 applies!

How to formalize this set calculation in Megalodon?

### Priority 2 (MEDIUM): five_regularity lower bound

The paper says: "If deg(v) = 4, then H is the (unique) R(3,5)-critical graph and is in particular 4-regular."

**Questions:**
1. Do we need to axiomatize the R(3,5)-critical graph properties, or can we derive them?
2. The paper's argument: Any t âˆˆ N(v) has â‰¥3 neighbors in H (by 4-regularity). How to formalize this?
3. Those 3 neighbors are independent from N(v)\{t}. How to build the 6-IS from this?

### Priority 3 (EASY once we have 5-regularity): neighborhood_intersection_lower

The proof in common_neighbors_bound.mg is excellent. Just need to:
1. Copy the proof structure
2. Replace axiom `graph_is_5_regular` with our `five_regularity` theorem
3. Fill in the trivial admits

## COMPILATION COMMAND

```bash
cd /home/zar/claude/megalodon/ramsey36
../bin/megalodon -mizar -I /home/zar/claude/megalodon/Megalodon/examples/mizar/PfgMizarNov2020Preamble.mgs cariolaro_anchored_proof.mg
```

## KEY FILES TO REFERENCE

### Primary files:
1. **cariolaro_anchored_proof.mg** - Main proof file (compiles, needs proofs filled in)
2. **paper/2025_02_07_b1cb8ce31b5aabf14429g.tex** - Cariolaro's original paper (THE source)

### Infrastructure to copy/adapt:
3. **common_neighbors_bound.mg** - Has complete proof of intersection_lower (lines 37-135)
4. **vertex_degree_bound.mg** - Has complete proof of 6-neighbors contradiction
5. **good_graph_proof.mg** - Has indep_add_vertex and other helpers
6. **cardinality_toolkit.mg** - Has equip/cardinality manipulation helpers

### Reference only:
7. **preamble.mgs** (/home/zar/claude/megalodon/Megalodon/examples/mizar/PfgMizarNov2020Preamble.mgs)
   - TwoRamseyProp axioms
   - dneg and other logic
   - Basic set theory

## PRIORITY ORDER

1. **EASIEST**: neighborhood_intersection_upper (R(3,4)=9 argument is straightforward)
2. **MEDIUM**: neighborhood_intersection_lower (needs 5-regularity but proof is direct)
3. **HARDEST**: five_regularity lower bound (needs R(3,5)-critical graph analysis)

Once these three are proved, the rest should follow from the paper's structure.

## EXAMPLE PROOF STYLE

See five_regularity_upper (lines 17-59) for an example of a complete proof in this style.
Key patterns:
- Use `claim` for intermediate results
- Use `andEL`/`andER` to extract from conjunctions
- Use `exact` to apply previous results
- Use `-`, `+`, `*` for proof branching
- Triangle-free arguments use pattern: apply Htf x Hx y Hy z Hz, then prove edges

Thank you for your help!
