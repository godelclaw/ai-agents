# Ramsey(3,6)=18 - Help Request for Claims 2, 3, and Final Contradiction

## CONTEXT

We're formalizing KrÃ¼ger's proof that R(3,6)=18 in Lean 4.

**Current status:**
- âœ… CLAIM 1 COMPLETE: All Ramsey(3,6;18) graphs are 5-regular
  - degree â‰¤ 5 (proven)
  - degree â‰¥ 4 (proven via R(3,5)=14)
  - degree â‰  4 (sorry - need help, see below)
- ðŸ”´ CLAIM 2: Neighbor structure partition (sorry - need help)
- ðŸ”´ CLAIM 3: Four-cycle existence (sorry - need help)
- ðŸ”´ FINAL: Derive contradiction (sorry - need help)

## CURRENT CODE STRUCTURE (Basic.lean)

### Claim 1 Part 3: degree â‰  4 (Lines 464-472)

```lean
lemma degree_not_four_of_triangleFree_no_6indep
    {G : SimpleGraph (Fin 18)} [DecidableRel G.Adj]
    (h_tri : TriangleFree G)
    (h_no6 : NoKIndepSet 6 G)
    (h_max_deg : âˆ€ v, G.degree v â‰¤ 5)
    (h_min_deg : âˆ€ v, G.degree v â‰¥ 4)
    (v : Fin 18) :
    G.degree v â‰  4 := by
  sorry
```

**Mathematical argument** (from Gemini's previous help):
- If deg(v) = 4, then G_v (13 non-neighbors) â‰ƒ H13 (unique 4-regular Ramsey(3,5;13) graph)
- Edge count between N(v) (4 vertices) and G_v (13 vertices): 12 â‰¤ edges â‰¤ 13
- Case 12: One vertex w has deg(w)=4, G_w â‰ƒ H13, but N(v) âŠ† G_w loses edges â†’ contradiction
- Case 13: Degrees {4,4,4,5}, pick two degree-4, regularity breaks â†’ contradiction

**What we need:**
- Complete Lean 4 proof or detailed proof sketch with specific Lean tactics
- How to handle induced subgraph on 13 vertices and coerce to Fin 13?
- How to apply H13 axiom to induced subgraph?
- How to prove the edge counting bounds and case analysis?

### Claim 2: Neighbor Structure (Lines 519-525)

```lean
lemma claim2_neighbor_structure {G : SimpleGraph (Fin 18)} [DecidableRel G.Adj]
    (h_reg : IsKRegular G 5) (h_tri : TriangleFree G) (h_no6 : NoKIndepSet 6 G) (v : Fin 18) :
    âˆƒ (P Q : Finset (Fin 18)),
      P.card = 4 âˆ§ Q.card = 8 âˆ§
      (âˆ€ p âˆˆ P, Â¬G.Adj v p âˆ§ commonNeighborsCard G v p = 1) âˆ§
      (âˆ€ q âˆˆ Q, Â¬G.Adj v q âˆ§ commonNeighborsCard G v q = 2) := by
  sorry
```

**Mathematical argument:**
- v has 5 neighbors N(v), 12 non-neighbors
- Triangle-free â‡’ N(v) is independent
- Each n âˆˆ N(v) has degree 5, uses 1 edge for v, has 4 edges to non-neighbors
- Total: 5 Ã— 4 = 20 edges from N(v) to non-neighbors
- Each non-neighbor w has commonNeighborsCard âˆˆ {1, 2} (â‰¥1 from no-6-indep, â‰¤2 from structure)
- Partition non-neighbors into P (1 common) and Q (2 common)
- Solve: P + Q = 12, PÂ·1 + QÂ·2 = 20 â†’ P=4, Q=8

**What we need:**
- How to prove commonNeighborsCard bounds (â‰¥1 and â‰¤2)?
- How to count edges from N(v) to non-neighbors?
- How to set up and solve the system P + Q = 12, P + 2Q = 20?

### Claim 3: Four-Cycle (Lines 527-532)

```lean
lemma claim3_four_cycle {G : SimpleGraph (Fin 18)} [DecidableRel G.Adj]
    (h_reg : IsKRegular G 5) (h_tri : TriangleFree G) (h_no6 : NoKIndepSet 6 G)
    (v : Fin 18) (P : Finset (Fin 18))
    (hP : P.card = 4 âˆ§ âˆ€ p âˆˆ P, Â¬G.Adj v p âˆ§ commonNeighborsCard G v p = 1) :
    âˆƒ (p1 p2 p3 p4 : Fin 18), P = {p1, p2, p3, p4} âˆ§ G.Adj p1 p2 := by
  sorry
```

**From KrÃ¼ger's thesis (line 556):**
"Note that in BC4 every cycle of length 4 contains at least two tetravalent vertices"

BC4 is the unique minimal Ramsey(3,5;12) graph with 20 edges.

**Mathematical argument** (needs clarification):
- P has 4 vertices, each sharing exactly 1 common neighbor with v
- These 4 vertices induce some structure related to BC4?
- Need to show at least one edge exists among P
- Or show a specific 4-cycle structure?

**What we need:**
- What is BC4 exactly? Structure/properties?
- Why must P contain an edge (or 4-cycle)?
- How does this relate to BC4 properties?
- Lean 4 proof strategy?

### Final Contradiction (Lines 534-537)

```lean
lemma final_contradiction {G : SimpleGraph (Fin 18)} [DecidableRel G.Adj]
    (h_reg : IsKRegular G 5) (h_tri : TriangleFree G) (h_no6 : NoKIndepSet 6 G) :
    False := by
  sorry
```

**Strategy:**
- Combine Claims 1, 2, 3
- Show the structure is impossible
- Derive False

**What we need:**
- How do Claims 1-3 combine to give contradiction?
- What's the exact argument flow?
- Lean 4 proof structure?

## INFRASTRUCTURE AVAILABLE

**Axioms:**
```lean
axiom ramsey_three_five : ramseyNumber 3 5 = 14
axiom ramsey_3_5_13_is_four_regular :
  âˆ€ (G : SimpleGraph (Fin 13)) [DecidableRel G.Adj],
    TriangleFree G â†’ NoKIndepSet 5 G â†’ IsKRegular G 4
```

**Definitions:**
```lean
def commonNeighbors (G : SimpleGraph V) (v w : V) : Finset V :=
  G.neighborFinset v âˆ© G.neighborFinset w

def commonNeighborsCard (G : SimpleGraph V) (v w : V) : â„• :=
  (commonNeighbors G v w).card

def IsKRegular (G : SimpleGraph V) (k : â„•) : Prop :=
  âˆ€ v : V, G.degree v = k

def TriangleFree (G : SimpleGraph V) : Prop :=
  âˆ€ (T : Finset V), Â¬ (T.card = 3 âˆ§ âˆ€ x âˆˆ T, âˆ€ y âˆˆ T, x â‰  y â†’ G.Adj x y)

def NoKIndepSet (k : â„•) (G : SimpleGraph V) : Prop :=
  âˆ€ (S : Finset V), Â¬ IsNIndepSet k S
```

**Proven lemmas:**
- `degree_le_of_triangleFree_no_indep`: degree â‰¤ 5
- `degree_ge_four_of_triangleFree_no_6indep`: degree â‰¥ 4 (uses R(3,5)=14)
- `neighborSet_indep_of_triangleFree`: N(v) is independent in triangle-free graph
- Induced subgraph machinery via `SimpleGraph.induce`, `comap`, etc.

## QUESTIONS FOR GPT-5.1 / GEMINI

1. **Claim 1 Part 3 (degree â‰  4)**:
   - Can you provide a complete Lean 4 proof or very detailed proof sketch?
   - How to handle the induced subgraph coercion from Finset to Fin 13?
   - Specific tactics for edge counting and case analysis?

2. **Claim 2 (neighbor structure)**:
   - How to prove common neighbors â‰¥ 1? (No 6-indep argument)
   - How to prove common neighbors â‰¤ 2? (Triangle-free structure)
   - How to formalize the edge counting (20 edges total)?
   - How to solve the linear system in Lean?

3. **Claim 3 (four-cycle)**:
   - What exactly is BC4? Can you describe its structure?
   - Why must P contain an edge or 4-cycle?
   - Should we axiomatize BC4 properties like we did H13?
   - Proof strategy in Lean 4?

4. **Final Contradiction**:
   - What's the exact contradiction from Claims 1-3?
   - How do they compose to give False?
   - Proof structure?

5. **General**:
   - Should any of these be axiomatized, or are all provable?
   - What's the minimal set of facts needed for a complete proof?
   - Any shortcuts or simplifications we're missing?

## FILES FOR REFERENCE

1. **Current Lean code**: `/home/zar/claude/lean-projects/ramsey36/Ramsey36/Basic.lean`
   - Claim 1: Lines 473-500 (COMPLETE)
   - Claim 2: Lines 519-525 (sorry)
   - Claim 3: Lines 527-532 (sorry)
   - Final: Lines 534-537 (sorry)

2. **KrÃ¼ger's thesis**: `related_literature/FULLTEXT01.txt`
   - Main argument: Lines 540-564
   - BC4 mention: Line 554

3. **Previous help**: `/tmp/all_ramsey_claim1_degree4_20251126_182612.txt`
   - Your previous excellent explanation of H13 and degree â‰  4

## SUCCESS CRITERIA

Complete Lean 4 proofs (or detailed proof sketches) for:
1. `degree_not_four_of_triangleFree_no_6indep` (Claim 1 Part 3)
2. `claim2_neighbor_structure` (neighbor partition)
3. `claim3_four_cycle` (4-cycle existence)
4. `final_contradiction` (combining all claims)

With these, we can complete the R(3,6)=18 formalization!

## THANK YOU!

Your previous help with H13 was invaluable. We're so close to finishing this proof!
